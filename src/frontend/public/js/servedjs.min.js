/*!
 * MIT License
 *
 * Copyright (c) 2017-2019 Imre Tabur <imre.tabur@eesti.ee>
 */
"use strict";!function(o){var r=o.jsdi=o.jsdi||{};r.service("$log",function(){var n={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5,ALL:6,currentLevel:0,setLevel:function(e){n.levelIsInRange(e)&&(n.currentLevel=e)},levelIsInRange:function(e){return n.OFF<=e&&e<=n.ALL},shouldLog:function(e){return n.currentLevel>=e},error:function(){console&&n.shouldLog(n.ERROR)&&console.error.apply(console,arguments)},warn:function(){console&&n.shouldLog(n.WARN)&&console.warn.apply(console,arguments)},info:function(){console&&n.shouldLog(n.INFO)&&console.info.apply(console,arguments)},log:function(){console&&n.shouldLog(n.INFO)&&console.log.apply(console,arguments)},debug:function(){console&&n.shouldLog(n.DEBUG)&&console.log.apply(console,arguments)},trace:function(){console&&n.shouldLog(n.TRACE)&&console.trace.apply(console,arguments)}};return n}),r.service("$browser",function(){var e={init:function(){},forward:function(){o&&o.history.forward()},back:function(){o&&o.history.back()},go:function(e){o&&("number"==typeof e?o.history.go(e):o.location.hash="#"+e)}};return e});function e(e){var n={storage:e,get:function(e){if(e){var n=this.storage.getItem(e);if(n)return JSON.parse(n)}return null},set:function(e,n){e&&n&&this.storage.setItem(e,JSON.stringify(n))},removeItem:function(e){e&&this.storage.removeItem(e)}};return n}!function(){var e,n,t=[{globalName:"_",serviceName:"$lodash"},{globalName:"S",serviceName:"$strings"}];for(n=0;n<t.length;n++)o[(e=t[n]).globalName]&&r.service(e.serviceName,o[e.globalName])}(),r.service("$localStorage",e(localStorage)),r.service("$sessionStorage",e(sessionStorage)),r.service("$placeholders",function(){return{replace:function(e,n){var t,o;if(e&&n)for(t in n)o=new RegExp("\\$\\{"+t+"\\}","g"),e=e.replace(o,n[t]);return e}}}),r.service("$timer",function(){return{newTimer:function(e,n){return{millis:n,timer:null,start:function(){this.timer=setTimeout(e,this.millis)},stop:function(){clearTimeout(this.timer)}}},newInterval:function(e,n){return{millis:n,timer:null,start:function(){this.timer=setInterval(e,this.millis)},stop:function(){clearTimeout(this.timer)}}}}}),r.service("$router",function(){return{data:null,callback:null,configure:function(e){if(e){this.callback=e;var n=this;window.addEventListener("hashchange",function(){n.process()},!1)}},process:function(){this.update(),this.callback&&this.callback(this.data)},update:function(){var e,n,t,o=window.location.hash,r=o.substring(1),i=r.split("?"),s=i[0],l=1<i.length?i[1]:"",a={hash:o,hashPath:r,hashRouteSide:s,hashParametersSide:l,parts:s.split("/").filter(function(e){return!!e}),parameters:{}};for(e=0;e<a.parts.length;e++)a.parts[e]=a.parts[e].toType();for(t=l.split("&"),e=0;e<t.length;e++)n=t[e].split("="),a.parameters[n[0]]=2===n.length?n[1].toType():null;this.data=a}}})}("undefined"==typeof window?global:window);