/*!
 * MIT License
 *
 * Copyright (c) 2017-2019 Imre Tabur <imre.tabur@eesti.ee>
 */
"use strict";!function(o){var i=o.jsdi=o.jsdi||{};i.service("$log",function(){var t={OFF:0,ERROR:1,WARN:2,INFO:3,DEBUG:4,TRACE:5,ALL:6,currentLevel:0,setLevel:function(e){t.levelIsInRange(e)&&(t.currentLevel=e)},levelIsInRange:function(e){return t.OFF<=e&&e<=t.ALL},shouldLog:function(e){return t.currentLevel>=e},error:function(){console&&t.shouldLog(t.ERROR)&&console.error.apply(console,arguments)},warn:function(){console&&t.shouldLog(t.WARN)&&console.warn.apply(console,arguments)},info:function(){console&&t.shouldLog(t.INFO)&&console.info.apply(console,arguments)},log:function(){console&&t.shouldLog(t.INFO)&&console.log.apply(console,arguments)},debug:function(){console&&t.shouldLog(t.DEBUG)&&console.log.apply(console,arguments)},trace:function(){console&&t.shouldLog(t.TRACE)&&console.trace.apply(console,arguments)}};return t}),i.service("$browser",function(){var e={init:function(){},forward:function(){o&&o.history.forward()},back:function(){o&&o.history.back()},go:function(e){o&&("number"==typeof e?o.history.go(e):o.location.hash="#"+e)}};return e});function e(e){var t={storage:e,get:function(e){if(e){var t=this.storage.getItem(e);if(t)return JSON.parse(t)}return null},set:function(e,t){e&&t&&this.storage.setItem(e,JSON.stringify(t))},removeItem:function(e){e&&this.storage.removeItem(e)}};return t}!function(){var e,t,n=[{globalName:"_",serviceName:"$lodash"},{globalName:"S",serviceName:"$strings"}];for(t=0;t<n.length;t++)o[(e=n[t]).globalName]&&i.service(e.serviceName,o[e.globalName])}(),i.service("$localStorage",e(localStorage)),i.service("$sessionStorage",e(sessionStorage)),i.service("$placeholders",function(){return{replace:function(e,t){var n,o;if(e&&t)for(n in t)o=new RegExp("\\$\\{"+n+"\\}","g"),e=e.replace(o,t[n]);return e}}}),i.service("$timer",function(){return{newTimer:function(e,t){return{millis:t,timer:null,start:function(){this.timer=setTimeout(e,this.millis)},stop:function(){clearTimeout(this.timer)}}},newInterval:function(e,t){return{millis:t,timer:null,start:function(){this.timer=setInterval(e,this.millis)},stop:function(){clearTimeout(this.timer)}}}}}),i.service("$router",function(){return{data:null,callback:null,configure:function(e){e&&!this.callback&&("function"==typeof e?this.configureFunction(e):"object"===ypeof(e)&&this.configureFunction(e))},configureFunction:function(e){this.callback=e;var t=this;window.addEventListener("hashchange",function(){t.process()},!1)},configureObject:function(e){var t=this;this.callbackObject=e,this.configureFunction(function(e){t.handleRouting(e)})},handleRouting:function(e){var t,n,o,i=this.callbackObject.routes;for(t=0;t<i.length;t++)if(o=i[t],this.isRoute(o))return void o.callback(e);n=this.callbackObject.defaultPath||"/",this.goTo(n)},goTo:function(e){window.location.hash=e},isRoute:function(e){return!1},process:function(){this.update(),this.callback&&this.callback(this.data)},update:function(){var e,t,n,o=window.location.hash,i=o.substring(1),r=i.split("?"),s=r[0],c=1<r.length?r[1]:"",l={hash:o,hashPath:i,hashRouteSide:s,hashParametersSide:c,parts:s.split("/").filter(function(e){return!!e}),parameters:{}};for(e=0;e<l.parts.length;e++)l.parts[e]=l.parts[e].toType();for(n=c.split("&"),e=0;e<n.length;e++)t=n[e].split("="),l.parameters[t[0]]=2===t.length?t[1].toType():null;this.data=l}}})}("undefined"==typeof window?global:window);